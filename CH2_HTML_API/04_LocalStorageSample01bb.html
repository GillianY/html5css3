<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Local Stroage</title>
<style>
div{
	padding:5px;
}

label{
	display:block;
	width:60px;
	text-align:right;
	padding-right:5px;
	float:left;
	font-weight:bold;
}

input[type="text"]{
	border:none;
	border-bottom:1px dashed black;
}
</style>
<script>
/*write code here*/

window.addEventListener("load",init);

function init()
{
	if(localStorage)
	{
		document.getElementById("status").innerHTML="support localstorage";	
		document.getElementById("saveButton").addEventListener("click",saveHandler );
		document.getElementById("clearButton").addEventListener("click",clearHandler);
		restoreData(); //when load , getstorage data
	}else
	{
		document.getElementById("status").innerHTML="support localstorage";
		}

	
}

function restoreData()
{
	document.getElementById("firstName").value= localStorage.getItem("name");
	document.getElementById("habit").value= localStorage.getItem("habit");
	
	
	}
	
function saveHandler()
{	//alert(0);
    // alert(document.getElementById("firstName").value);
	var firstNameValue= document.getElementById("firstName").value; //not value()
	var habitValue= document.getElementById("habit").value;
	
	localStorage.setItem("name",firstNameValue);
	localStorage.setItem("habit",habitValue);
	}	
	
	
window.addEventListener("storage",storageHandler);	
function clearHandler()
{
	/*
	localStorage.removeItem("name");
	localStorage.removeItem("habit");
	
	for(var key in localStorage)
	{
		localStorage.removeItem(key);
	}
	*/
	localStorage.clear();
	
	document.getElementById("firstName").value= "";
	document.getElementById("habit").value= "";
}


function storageHandler(e)
{
	//alert( );
	console.log(e.key+":"+e.oldValue+"_new:"+e.newValue+"_who:"+e.url);
	restoreData();	
}

</script>
</head>

<body>
<h1 id="status">status</h1>
<div>
	<label>Name:</label>
    <input type="text" id="firstName"/>
</div>
<div>
	<label>Habit:</label>
    <input type="text" id="habit"/>
</div>
<div>
	<input type="button" id="saveButton" value="Save"/>
    <input type="button" id="clearButton" value="Clear"/>
</div>


</body>
</html>
